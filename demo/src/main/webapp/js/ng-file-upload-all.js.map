{"version":3,"sources":["dist/ng-file-upload-all.js"],"names":[],"mappings":"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","file":"dist/ng-file-upload-all.js","sourcesContent":["/**!\n * AngularJS file upload directives and services. Supports: file upload/drop/paste, resume, cancel/abort,\n * progress, resize, thumbnail, preview, validation and CORS\n * FileAPI Flash shim for old browsers not supporting FormData\n * @author  Danial  <danial.farid@gmail.com>\n * @version 12.3.4\n */\n\n(function () {\n  /** @namespace FileAPI.noContentTimeout */\n\n  function patchXHR(fnName, newFn) {\n    window.XMLHttpRequest.prototype[fnName] = newFn(window.XMLHttpRequest.prototype[fnName]);\n  }\n\n  function redefineProp(xhr, prop, fn) {\n    try {\n      Object.defineProperty(xhr, prop, {get: fn});\n    } catch (e) {/*ignore*/\n    }\n  }\n\n  if (!window.FileAPI) {\n    window.FileAPI = {};\n  }\n\n  if (!window.XMLHttpRequest) {\n    throw 'AJAX is not supported. XMLHttpRequest is not defined.';\n  }\n\n  FileAPI.shouldLoad = !window.FormData || FileAPI.forceLoad;\n  if (FileAPI.shouldLoad) {\n    var initializeUploadListener = function (xhr) {\n      if (!xhr.__listeners) {\n        if (!xhr.upload) xhr.upload = {};\n        xhr.__listeners = [];\n        var origAddEventListener = xhr.upload.addEventListener;\n        xhr.upload.addEventListener = function (t, fn) {\n          xhr.__listeners[t] = fn;\n          if (origAddEventListener) origAddEventListener.apply(this, arguments);\n        };\n      }\n    };\n\n    patchXHR('open', function (orig) {\n      return function (m, url, b) {\n        initializeUploadListener(this);\n        this.__url = url;\n        try {\n          orig.apply(this, [m, url, b]);\n        } catch (e) {\n          if (e.message.indexOf('Access is denied') > -1) {\n            this.__origError = e;\n            orig.apply(this, [m, '_fix_for_ie_crossdomain__', b]);\n          }\n        }\n      };\n    });\n\n    patchXHR('getResponseHeader', function (orig) {\n      return function (h) {\n        return this.__fileApiXHR && this.__fileApiXHR.getResponseHeader ? this.__fileApiXHR.getResponseHeader(h) : (orig == null ? null : orig.apply(this, [h]));\n      };\n    });\n\n    patchXHR('getAllResponseHeaders', function (orig) {\n      return function () {\n        return this.__fileApiXHR && this.__fileApiXHR.getAllResponseHeaders ? this.__fileApiXHR.getAllResponseHeaders() : (orig == null ? null : orig.apply(this));\n      };\n    });\n\n    patchXHR('abort', function (orig) {\n      return function () {\n        return this.__fileApiXHR && this.__fileApiXHR.abort ? this.__fileApiXHR.abort() : (orig == null ? null : orig.apply(this));\n      };\n    });\n\n    patchXHR('setRequestHeader', function (orig) {\n      return function (header, value) {\n        if (header === '__setXHR_') {\n          initializeUploadListener(this);\n          var val = value(this);\n          // fix for angular < 1.2.0\n          if (val instanceof Function) {\n            val(this);\n          }\n        } else {\n          this.__requestHeaders = this.__requestHeaders || {};\n          this.__requestHeaders[header] = value;\n          orig.apply(this, arguments);\n        }\n      };\n    });\n\n    patchXHR('send', function (orig) {\n      return function () {\n        var xhr = this;\n        if (arguments[0] && arguments[0].__isFileAPIShim) {\n          var formData = arguments[0];\n          var config = {\n            url: xhr.__url,\n            jsonp: false, //removes the callback form param\n            cache: true, //removes the ?fileapiXXX in the url\n            complete: function (err, fileApiXHR) {\n              if (err && angular.isString(err) && err.indexOf('#2174') !== -1) {\n                // this error seems to be fine the file is being uploaded properly.\n                err = null;\n              }\n              xhr.__completed = true;\n              if (!err && xhr.__listeners.load)\n                xhr.__listeners.load({\n                  type: 'load',\n                  loaded: xhr.__loaded,\n                  total: xhr.__total,\n                  target: xhr,\n                  lengthComputable: true\n                });\n              if (!err && xhr.__listeners.loadend)\n                xhr.__listeners.loadend({\n                  type: 'loadend',\n                  loaded: xhr.__loaded,\n                  total: xhr.__total,\n                  target: xhr,\n                  lengthComputable: true\n                });\n              if (err === 'abort' && xhr.__listeners.abort)\n                xhr.__listeners.abort({\n                  type: 'abort',\n                  loaded: xhr.__loaded,\n                  total: xhr.__total,\n                  target: xhr,\n                  lengthComputable: true\n                });\n              if (fileApiXHR.status !== undefined) redefineProp(xhr, 'status', function () {\n                return (fileApiXHR.status === 0 && err && err !== 'abort') ? 500 : fileApiXHR.status;\n              });\n              if (fileApiXHR.statusText !== undefined) redefineProp(xhr, 'statusText', function () {\n                return fileApiXHR.statusText;\n              });\n              redefineProp(xhr, 'readyState', function () {\n                return 4;\n              });\n              if (fileApiXHR.response !== undefined) redefineProp(xhr, 'response', function () {\n                return fileApiXHR.response;\n              });\n              var resp = fileApiXHR.responseText || (err && fileApiXHR.status === 0 && err !== 'abort' ? err : undefined);\n              redefineProp(xhr, 'responseText', function () {\n                return resp;\n              });\n              redefineProp(xhr, 'response', function () {\n                return resp;\n              });\n              if (err) redefineProp(xhr, 'err', function () {\n                return err;\n              });\n              xhr.__fileApiXHR = fileApiXHR;\n              if (xhr.onreadystatechange) xhr.onreadystatechange();\n              if (xhr.onload) xhr.onload();\n            },\n            progress: function (e) {\n              e.target = xhr;\n              if (xhr.__listeners.progress) xhr.__listeners.progress(e);\n              xhr.__total = e.total;\n              xhr.__loaded = e.loaded;\n              if (e.total === e.loaded) {\n                // fix flash issue that doesn't call complete if there is no response text from the server\n                var _this = this;\n                setTimeout(function () {\n                  if (!xhr.__completed) {\n                    xhr.getAllResponseHeaders = function () {\n                    };\n                    _this.complete(null, {status: 204, statusText: 'No Content'});\n                  }\n                }, FileAPI.noContentTimeout || 10000);\n              }\n            },\n            headers: xhr.__requestHeaders\n          };\n          config.data = {};\n          config.files = {};\n          for (var i = 0; i < formData.data.length; i++) {\n            var item = formData.data[i];\n            if (item.val != null && item.val.name != null && item.val.size != null && item.val.type != null) {\n              config.files[item.key] = item.val;\n            } else {\n              config.data[item.key] = item.val;\n            }\n          }\n\n          setTimeout(function () {\n            if (!FileAPI.hasFlash) {\n              throw 'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';\n            }\n            xhr.__fileApiXHR = FileAPI.upload(config);\n          }, 1);\n        } else {\n          if (this.__origError) {\n            throw this.__origError;\n          }\n          orig.apply(xhr, arguments);\n        }\n      };\n    });\n    window.XMLHttpRequest.__isFileAPIShim = true;\n    window.FormData = FormData = function () {\n      return {\n        append: function (key, val, name) {\n          if (val.__isFileAPIBlobShim) {\n            val = val.data[0];\n          }\n          this.data.push({\n            key: key,\n            val: val,\n            name: name\n          });\n        },\n        data: [],\n        __isFileAPIShim: true\n      };\n    };\n\n    window.Blob = Blob = function (b) {\n      return {\n        data: b,\n        __isFileAPIBlobShim: true\n      };\n    };\n  }\n\n})();\n\n(function () {\n  /** @namespace FileAPI.forceLoad */\n  /** @namespace window.FileAPI.jsUrl */\n  /** @namespace window.FileAPI.jsPath */\n\n  function isInputTypeFile(elem) {\n    return elem[0].tagName.toLowerCase() === 'input' && elem.attr('type') && elem.attr('type').toLowerCase() === 'file';\n  }\n\n  function hasFlash() {\n    try {\n      var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');\n      if (fo) return true;\n    } catch (e) {\n      if (navigator.mimeTypes['application/x-shockwave-flash'] !== undefined) return true;\n    }\n    return false;\n  }\n\n  function getOffset(obj) {\n    var left = 0, top = 0;\n\n    if (window.jQuery) {\n      return jQuery(obj).offset();\n    }\n\n    if (obj.offsetParent) {\n      do {\n        left += (obj.offsetLeft - obj.scrollLeft);\n        top += (obj.offsetTop - obj.scrollTop);\n        obj = obj.offsetParent;\n      } while (obj);\n    }\n    return {\n      left: left,\n      top: top\n    };\n  }\n\n  if (FileAPI.shouldLoad) {\n    FileAPI.hasFlash = hasFlash();\n\n    //load FileAPI\n    if (FileAPI.forceLoad) {\n      FileAPI.html5 = false;\n    }\n\n    if (!FileAPI.upload) {\n      var jsUrl, basePath, script = document.createElement('script'), allScripts = document.getElementsByTagName('script'), i, index, src;\n      if (window.FileAPI.jsUrl) {\n        jsUrl = window.FileAPI.jsUrl;\n      } else if (window.FileAPI.jsPath) {\n        basePath = window.FileAPI.jsPath;\n      } else {\n        for (i = 0; i < allScripts.length; i++) {\n          src = allScripts[i].src;\n          index = src.search(/\\/ng\\-file\\-upload[\\-a-zA-z0-9\\.]*\\.js/);\n          if (index > -1) {\n            basePath = src.substring(0, index + 1);\n            break;\n          }\n        }\n      }\n\n      if (FileAPI.staticPath == null) FileAPI.staticPath = basePath;\n      script.setAttribute('src', jsUrl || basePath + 'FileAPI.min.js');\n      document.getElementsByTagName('head')[0].appendChild(script);\n    }\n\n    FileAPI.ngfFixIE = function (elem, fileElem, changeFn) {\n      if (!hasFlash()) {\n        throw 'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';\n      }\n      var fixInputStyle = function () {\n        var label = fileElem.parent();\n        if (elem.attr('disabled')) {\n          if (label) label.removeClass('js-fileapi-wrapper');\n        } else {\n          if (!fileElem.attr('__ngf_flash_')) {\n            fileElem.unbind('change');\n            fileElem.unbind('click');\n            fileElem.bind('change', function (evt) {\n              fileApiChangeFn.apply(this, [evt]);\n              changeFn.apply(this, [evt]);\n            });\n            fileElem.attr('__ngf_flash_', 'true');\n          }\n          label.addClass('js-fileapi-wrapper');\n          if (!isInputTypeFile(elem)) {\n            label.css('position', 'absolute')\n              .css('top', getOffset(elem[0]).top + 'px').css('left', getOffset(elem[0]).left + 'px')\n              .css('width', elem[0].offsetWidth + 'px').css('height', elem[0].offsetHeight + 'px')\n              .css('filter', 'alpha(opacity=0)').css('display', elem.css('display'))\n              .css('overflow', 'hidden').css('z-index', '900000')\n              .css('visibility', 'visible');\n            fileElem.css('width', elem[0].offsetWidth + 'px').css('height', elem[0].offsetHeight + 'px')\n              .css('position', 'absolute').css('top', '0px').css('left', '0px');\n          }\n        }\n      };\n\n      elem.bind('mouseenter', fixInputStyle);\n\n      var fileApiChangeFn = function (evt) {\n        var files = FileAPI.getFiles(evt);\n        //just a double check for #233\n        for (var i = 0; i < files.length; i++) {\n          if (files[i].size === undefined) files[i].size = 0;\n          if (files[i].name === undefined) files[i].name = 'file';\n          if (files[i].type === undefined) files[i].type = 'undefined';\n        }\n        if (!evt.target) {\n          evt.target = {};\n        }\n        evt.target.files = files;\n        // if evt.target.files is not writable use helper field\n        if (evt.target.files !== files) {\n          evt.__files_ = files;\n        }\n        (evt.__files_ || evt.target.files).item = function (i) {\n          return (evt.__files_ || evt.target.files)[i] || null;\n        };\n      };\n    };\n\n    FileAPI.disableFileInput = function (elem, disable) {\n      if (disable) {\n        elem.removeClass('js-fileapi-wrapper');\n      } else {\n        elem.addClass('js-fileapi-wrapper');\n      }\n    };\n  }\n})();\n\nif (!window.FileReader) {\n  window.FileReader = function () {\n    var _this = this, loadStarted = false;\n    this.listeners = {};\n    this.addEventListener = function (type, fn) {\n      _this.listeners[type] = _this.listeners[type] || [];\n      _this.listeners[type].push(fn);\n    };\n    this.removeEventListener = function (type, fn) {\n      if (_this.listeners[type]) _this.listeners[type].splice(_this.listeners[type].indexOf(fn), 1);\n    };\n    this.dispatchEvent = function (evt) {\n      var list = _this.listeners[evt.type];\n      if (list) {\n        for (var i = 0; i < list.length; i++) {\n          list[i].call(_this, evt);\n        }\n      }\n    };\n    this.onabort = this.onerror = this.onload = this.onloadstart = this.onloadend = this.onprogress = null;\n\n    var constructEvent = function (type, evt) {\n      var e = {type: type, target: _this, loaded: evt.loaded, total: evt.total, error: evt.error};\n      if (evt.result != null) e.target.result = evt.result;\n      return e;\n    };\n    var listener = function (evt) {\n      if (!loadStarted) {\n        loadStarted = true;\n        if (_this.onloadstart) _this.onloadstart(constructEvent('loadstart', evt));\n      }\n      var e;\n      if (evt.type === 'load') {\n        if (_this.onloadend) _this.onloadend(constructEvent('loadend', evt));\n        e = constructEvent('load', evt);\n        if (_this.onload) _this.onload(e);\n        _this.dispatchEvent(e);\n      } else if (evt.type === 'progress') {\n        e = constructEvent('progress', evt);\n        if (_this.onprogress) _this.onprogress(e);\n        _this.dispatchEvent(e);\n      } else {\n        e = constructEvent('error', evt);\n        if (_this.onerror) _this.onerror(e);\n        _this.dispatchEvent(e);\n      }\n    };\n    this.readAsDataURL = function (file) {\n      FileAPI.readAsDataURL(file, listener);\n    };\n    this.readAsText = function (file) {\n      FileAPI.readAsText(file, listener);\n    };\n  };\n}\n\n/**!\n * AngularJS file upload directives and services. Supoorts: file upload/drop/paste, resume, cancel/abort,\n * progress, resize, thumbnail, preview, validation and CORS\n * @author  Danial  <danial.farid@gmail.com>\n * @version 12.3.4\n */\n\nif (window.XMLHttpRequest && !(window.FileAPI && FileAPI.shouldLoad)) {\n  window.XMLHttpRequest.prototype.setRequestHeader = (function (orig) {\n    return function (header, value) {\n      if (header === '__setXHR_') {\n        var val = value(this);\n        // fix for angular < 1.2.0\n        if (val instanceof Function) {\n          val(this);\n        }\n      } else {\n        orig.apply(this, arguments);\n      }\n    };\n  })(window.XMLHttpRequest.prototype.setRequestHeader);\n}\n\nvar ngFileUpload = angular.module('ngFileUpload', []);\n\nngFileUpload.version = '12.3.4';\n\nngFileUpload.service('UploadBase', ['$http', '$q', '$timeout', function ($http, $q, $timeout) {\n  var upload = this;\n  upload.promisesCount = 0;\n\n  this.isResumeSupported = function () {\n    return window.Blob && window.Blob.prototype.slice;\n  };\n\n  var resumeSupported = this.isResumeSupported();\n\n  function sendHttp(config) {\n    config.method = config.method || 'POST';\n    config.headers = config.headers || {};\n\n    var deferred = config._deferred = config._deferred || $q.defer();\n    var promise = deferred.promise;\n\n    function notifyProgress(e) {\n      if (deferred.notify) {\n        deferred.notify(e);\n      }\n      if (promise.progressFunc) {\n        $timeout(function () {\n          promise.progressFunc(e);\n        });\n      }\n    }\n\n    function getNotifyEvent(n) {\n      if (config._start != null && resumeSupported) {\n        return {\n          loaded: n.loaded + config._start,\n          total: (config._file && config._file.size) || n.total,\n          type: n.type, config: config,\n          lengthComputable: true, target: n.target\n        };\n      } else {\n        return n;\n      }\n    }\n\n    if (!config.disableProgress) {\n      config.headers.__setXHR_ = function () {\n        return function (xhr) {\n          if (!xhr || !xhr.upload || !xhr.upload.addEventListener) return;\n          config.__XHR = xhr;\n          if (config.xhrFn) config.xhrFn(xhr);\n          xhr.upload.addEventListener('progress', function (e) {\n            e.config = config;\n            notifyProgress(getNotifyEvent(e));\n          }, false);\n          //fix for firefox not firing upload progress end, also IE8-9\n          xhr.upload.addEventListener('load', function (e) {\n            if (e.lengthComputable) {\n              e.config = config;\n              notifyProgress(getNotifyEvent(e));\n            }\n          }, false);\n        };\n      };\n    }\n\n    function uploadWithAngular() {\n      $http(config).then(function (r) {\n          if (resumeSupported && config._chunkSize && !config._finished && config._file) {\n            var fileSize = config._file && config._file.size || 0;\n            notifyProgress({\n                loaded: Math.min(config._end, fileSize),\n                total: fileSize,\n                config: config,\n                type: 'progress'\n              }\n            );\n            upload.upload(config, true);\n          } else {\n            if (config._finished) delete config._finished;\n            deferred.resolve(r);\n          }\n        }, function (e) {\n          deferred.reject(e);\n        }, function (n) {\n          deferred.notify(n);\n        }\n      );\n    }\n\n    if (!resumeSupported) {\n      uploadWithAngular();\n    } else if (config._chunkSize && config._end && !config._finished) {\n      config._start = config._end;\n      config._end += config._chunkSize;\n      uploadWithAngular();\n    } else if (config.resumeSizeUrl) {\n      $http.get(config.resumeSizeUrl).then(function (resp) {\n        if (config.resumeSizeResponseReader) {\n          config._start = config.resumeSizeResponseReader(resp.data);\n        } else {\n          config._start = parseInt((resp.data.size == null ? resp.data : resp.data.size).toString());\n        }\n        if (config._chunkSize) {\n          config._end = config._start + config._chunkSize;\n        }\n        uploadWithAngular();\n      }, function (e) {\n        throw e;\n      });\n    } else if (config.resumeSize) {\n      config.resumeSize().then(function (size) {\n        config._start = size;\n        if (config._chunkSize) {\n          config._end = config._start + config._chunkSize;\n        }\n        uploadWithAngular();\n      }, function (e) {\n        throw e;\n      });\n    } else {\n      if (config._chunkSize) {\n        config._start = 0;\n        config._end = config._start + config._chunkSize;\n      }\n      uploadWithAngular();\n    }\n\n\n    promise.success = function (fn) {\n      promise.then(function (response) {\n        fn(response.data, response.status, response.headers, config);\n      }).catch(angular.noop);\n      return promise;\n    };\n\n    promise.error = function (fn) {\n      promise.then(null, function (response) {\n        fn(response.data, response.status, response.headers, config);\n      });\n      return promise;\n    };\n\n    promise.progress = function (fn) {\n      promise.progressFunc = fn;\n      promise.then(null, null, function (n) {\n        fn(n);\n      }).catch(angular.noop);\n      return promise;\n    };\n    promise.abort = promise.pause = function () {\n      if (config.__XHR) {\n        $timeout(function () {\n          config.__XHR.abort();\n        });\n      }\n      return promise;\n    };\n    promise.xhr = function (fn) {\n      config.xhrFn = (function (origXhrFn) {\n        return function () {\n          if (origXhrFn) origXhrFn.apply(promise, arguments);\n          fn.apply(promise, arguments);\n        };\n      })(config.xhrFn);\n      return promise;\n    };\n\n    upload.promisesCount++;\n    if (promise['finally'] && promise['finally'] instanceof Function) {\n      promise['finally'](function () {\n        upload.promisesCount--;\n      }).catch(angular.noop);\n    }\n    return promise;\n  }\n\n  this.isUploadInProgress = function () {\n    return upload.promisesCount > 0;\n  };\n\n  this.rename = function (file, name) {\n    file.ngfName = name;\n    return file;\n  };\n\n  this.jsonBlob = function (val) {\n    if (val != null && !angular.isString(val)) {\n      val = JSON.stringify(val);\n    }\n    var blob = new window.Blob([val], {type: 'application/json'});\n    blob._ngfBlob = true;\n    return blob;\n  };\n\n  this.json = function (val) {\n    return angular.toJson(val);\n  };\n\n  function copy(obj) {\n    var clone = {};\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        clone[key] = obj[key];\n      }\n    }\n    return clone;\n  }\n\n  this.isFile = function (file) {\n    return file != null && (file instanceof window.Blob || (file.flashId && file.name && file.size));\n  };\n\n  this.upload = function (config, internal) {\n    function toResumeFile(file, formData) {\n      if (file._ngfBlob) return file;\n      config._file = config._file || file;\n      if (config._start != null && resumeSupported) {\n        if (config._end && config._end >= file.size) {\n          config._finished = true;\n          config._end = file.size;\n        }\n        var slice = file.slice(config._start, config._end || file.size);\n        slice.name = file.name;\n        slice.ngfName = file.ngfName;\n        if (config._chunkSize) {\n          formData.append('_chunkSize', config._chunkSize);\n          formData.append('_currentChunkSize', config._end - config._start);\n          formData.append('_chunkNumber', Math.floor(config._start / config._chunkSize));\n          formData.append('_totalSize', config._file.size);\n        }\n        return slice;\n      }\n      return file;\n    }\n\n    function addFieldToFormData(formData, val, key) {\n      if (val !== undefined) {\n        if (angular.isDate(val)) {\n          val = val.toISOString();\n        }\n        if (angular.isString(val)) {\n          formData.append(key, val);\n        } else if (upload.isFile(val)) {\n          var file = toResumeFile(val, formData);\n          var split = key.split(',');\n          if (split[1]) {\n            file.ngfName = split[1].replace(/^\\s+|\\s+$/g, '');\n            key = split[0];\n          }\n          config._fileKey = config._fileKey || key;\n          formData.append(key, file, file.ngfName || file.name);\n        } else {\n          if (angular.isObject(val)) {\n            if (val.$$ngfCircularDetection) throw 'ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: ' + key;\n\n            val.$$ngfCircularDetection = true;\n            try {\n              for (var k in val) {\n                if (val.hasOwnProperty(k) && k !== '$$ngfCircularDetection') {\n                  var objectKey = config.objectKey == null ? '[i]' : config.objectKey;\n                  if (val.length && parseInt(k) > -1) {\n                    objectKey = config.arrayKey == null ? objectKey : config.arrayKey;\n                  }\n                  addFieldToFormData(formData, val[k], key + objectKey.replace(/[ik]/g, k));\n                }\n              }\n            } finally {\n              delete val.$$ngfCircularDetection;\n            }\n          } else {\n            formData.append(key, val);\n          }\n        }\n      }\n    }\n\n    function digestConfig() {\n      config._chunkSize = upload.translateScalars(config.resumeChunkSize);\n      config._chunkSize = config._chunkSize ? parseInt(config._chunkSize.toString()) : null;\n\n      config.headers = config.headers || {};\n      config.headers['Content-Type'] = undefined;\n      config.transformRequest = config.transformRequest ?\n        (angular.isArray(config.transformRequest) ?\n          config.transformRequest : [config.transformRequest]) : [];\n      config.transformRequest.push(function (data) {\n        var formData = new window.FormData(), key;\n        data = data || config.fields || {};\n        if (config.file) {\n          data.file = config.file;\n        }\n        for (key in data) {\n          if (data.hasOwnProperty(key)) {\n            var val = data[key];\n            if (config.formDataAppender) {\n              config.formDataAppender(formData, key, val);\n            } else {\n              addFieldToFormData(formData, val, key);\n            }\n          }\n        }\n\n        return formData;\n      });\n    }\n\n    if (!internal) config = copy(config);\n    if (!config._isDigested) {\n      config._isDigested = true;\n      digestConfig();\n    }\n\n    return sendHttp(config);\n  };\n\n  this.http = function (config) {\n    config = copy(config);\n    config.transformRequest = config.transformRequest || function (data) {\n        if ((window.ArrayBuffer && data instanceof window.ArrayBuffer) || data instanceof window.Blob) {\n          return data;\n        }\n        return $http.defaults.transformRequest[0].apply(this, arguments);\n      };\n    config._chunkSize = upload.translateScalars(config.resumeChunkSize);\n    config._chunkSize = config._chunkSize ? parseInt(config._chunkSize.toString()) : null;\n\n    return sendHttp(config);\n  };\n\n  this.translateScalars = function (str) {\n    if (angular.isString(str)) {\n      if (str.search(/kb/i) === str.length - 2) {\n        return parseFloat(str.substring(0, str.length - 2) * 1024);\n      } else if (str.search(/mb/i) === str.length - 2) {\n        return parseFloat(str.substring(0, str.length - 2) * 1048576);\n      } else if (str.search(/gb/i) === str.length - 2) {\n        return parseFloat(str.substring(0, str.length - 2) * 1073741824);\n      } else if (str.search(/b/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1));\n      } else if (str.search(/s/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1));\n      } else if (str.search(/m/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1) * 60);\n      } else if (str.search(/h/i) === str.length - 1) {\n        return parseFloat(str.substring(0, str.length - 1) * 3600);\n      }\n    }\n    return str;\n  };\n\n  this.urlToBlob = function(url) {\n    var defer = $q.defer();\n    $http({url: url, method: 'get', responseType: 'arraybuffer'}).then(function (resp) {\n      var arrayBufferView = new Uint8Array(resp.data);\n      var type = resp.headers('content-type') || 'image/WebP';\n      var blob = new window.Blob([arrayBufferView], {type: type});\n      var matches = url.match(/.*\\/(.+?)(\\?.*)?$/);\n      if (matches.length > 1) {\n        blob.name = matches[1];\n      }\n      defer.resolve(blob);\n    }, function (e) {\n      defer.reject(e);\n    });\n    return defer.promise;\n  };\n\n  this.setDefaults = function (defaults) {\n    this.defaults = defaults || {};\n  };\n\n  this.defaults = {};\n  this.version = ngFileUpload.version;\n}\n\n]);\n\nngFileUpload.service('Upload', ['$parse', '$timeout', '$compile', '$q', 'UploadExif', function ($parse, $timeout, $compile, $q, UploadExif) {\n  var upload = UploadExif;\n  upload.getAttrWithDefaults = function (attr, name) {\n    if (attr[name] != null) return attr[name];\n    var def = upload.defaults[name];\n    return (def == null ? def : (angular.isString(def) ? def : JSON.stringify(def)));\n  };\n\n  upload.attrGetter = function (name, attr, scope, params) {\n    var attrVal = this.getAttrWithDefaults(attr, name);\n    if (scope) {\n      try {\n        if (params) {\n          return $parse(attrVal)(scope, params);\n        } else {\n          return $parse(attrVal)(scope);\n        }\n      } catch (e) {\n        // hangle string value without single qoute\n        if (name.search(/min|max|pattern/i)) {\n          return attrVal;\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      return attrVal;\n    }\n  };\n\n  upload.shouldUpdateOn = function (type, attr, scope) {\n    var modelOptions = upload.attrGetter('ngfModelOptions', attr, scope);\n    if (modelOptions && modelOptions.updateOn) {\n      return modelOptions.updateOn.split(' ').indexOf(type) > -1;\n    }\n    return true;\n  };\n\n  upload.emptyPromise = function () {\n    var d = $q.defer();\n    var args = arguments;\n    $timeout(function () {\n      d.resolve.apply(d, args);\n    });\n    return d.promise;\n  };\n\n  upload.rejectPromise = function () {\n    var d = $q.defer();\n    var args = arguments;\n    $timeout(function () {\n      d.reject.apply(d, args);\n    });\n    return d.promise;\n  };\n\n  upload.happyPromise = function (promise, data) {\n    var d = $q.defer();\n    promise.then(function (result) {\n      d.resolve(result);\n    }, function (error) {\n      $timeout(function () {\n        throw error;\n      });\n      d.resolve(data);\n    });\n    return d.promise;\n  };\n\n  function applyExifRotations(files, attr, scope) {\n    var promises = [upload.emptyPromise()];\n    angular.forEach(files, function (f, i) {\n      if (f.type.indexOf('image/jpeg') === 0 && upload.attrGetter('ngfFixOrientation', attr, scope, {$file: f})) {\n        promises.push(upload.happyPromise(upload.applyExifRotation(f), f).then(function (fixedFile) {\n          files.splice(i, 1, fixedFile);\n        }));\n      }\n    });\n    return $q.all(promises);\n  }\n\n  function resizeFile(files, attr, scope, ngModel) {\n    var resizeVal = upload.attrGetter('ngfResize', attr, scope);\n    if (!resizeVal || !upload.isResizeSupported() || !files.length) return upload.emptyPromise();\n    if (resizeVal instanceof Function) {\n      var defer = $q.defer();\n      return resizeVal(files).then(function (p) {\n        resizeWithParams(p, files, attr, scope, ngModel).then(function (r) {\n          defer.resolve(r);\n        }, function (e) {\n          defer.reject(e);\n        });\n      }, function (e) {\n        defer.reject(e);\n      });\n    } else {\n      return resizeWithParams(resizeVal, files, attr, scope, ngModel);\n    }\n  }\n\n  function resizeWithParams(params, files, attr, scope, ngModel) {\n    var promises = [upload.emptyPromise()];\n\n    function handleFile(f, i) {\n      if (f.type.indexOf('image') === 0) {\n        if (params.pattern && !upload.validatePattern(f, params.pattern)) return;\n        params.resizeIf = function (width, height) {\n          return upload.attrGetter('ngfResizeIf', attr, scope,\n            {$width: width, $height: height, $file: f});\n        };\n        var promise = upload.resize(f, params);\n        promises.push(promise);\n        promise.then(function (resizedFile) {\n          files.splice(i, 1, resizedFile);\n        }, function (e) {\n          f.$error = 'resize';\n          (f.$errorMessages = (f.$errorMessages || {})).resize = true;\n          f.$errorParam = (e ? (e.message ? e.message : e) + ': ' : '') + (f && f.name);\n          ngModel.$ngfValidations.push({name: 'resize', valid: false});\n          upload.applyModelValidation(ngModel, files);\n        });\n      }\n    }\n\n    for (var i = 0; i < files.length; i++) {\n      handleFile(files[i], i);\n    }\n    return $q.all(promises);\n  }\n\n  upload.updateModel = function (ngModel, attr, scope, fileChange, files, evt, noDelay) {\n    function update(files, invalidFiles, newFiles, dupFiles, isSingleModel) {\n      attr.$$ngfPrevValidFiles = files;\n      attr.$$ngfPrevInvalidFiles = invalidFiles;\n      var file = files && files.length ? files[0] : null;\n      var invalidFile = invalidFiles && invalidFiles.length ? invalidFiles[0] : null;\n\n      if (ngModel) {\n        upload.applyModelValidation(ngModel, files);\n        ngModel.$setViewValue(isSingleModel ? file : files);\n      }\n\n      if (fileChange) {\n        $parse(fileChange)(scope, {\n          $files: files,\n          $file: file,\n          $newFiles: newFiles,\n          $duplicateFiles: dupFiles,\n          $invalidFiles: invalidFiles,\n          $invalidFile: invalidFile,\n          $event: evt\n        });\n      }\n\n      var invalidModel = upload.attrGetter('ngfModelInvalid', attr);\n      if (invalidModel) {\n        $timeout(function () {\n          $parse(invalidModel).assign(scope, isSingleModel ? invalidFile : invalidFiles);\n        });\n      }\n      $timeout(function () {\n        // scope apply changes\n      });\n    }\n\n    var allNewFiles, dupFiles = [], prevValidFiles, prevInvalidFiles,\n      invalids = [], valids = [];\n\n    function removeDuplicates() {\n      function equals(f1, f2) {\n        return f1.name === f2.name && (f1.$ngfOrigSize || f1.size) === (f2.$ngfOrigSize || f2.size) &&\n          f1.type === f2.type;\n      }\n\n      function isInPrevFiles(f) {\n        var j;\n        for (j = 0; j < prevValidFiles.length; j++) {\n          if (equals(f, prevValidFiles[j])) {\n            return true;\n          }\n        }\n        for (j = 0; j < prevInvalidFiles.length; j++) {\n          if (equals(f, prevInvalidFiles[j])) {\n            return true;\n          }\n        }\n        return false;\n      }\n\n      if (files) {\n        allNewFiles = [];\n        dupFiles = [];\n        for (var i = 0; i < files.length; i++) {\n          if (isInPrevFiles(files[i])) {\n            dupFiles.push(files[i]);\n          } else {\n            allNewFiles.push(files[i]);\n          }\n        }\n      }\n    }\n\n    function toArray(v) {\n      return angular.isArray(v) ? v : [v];\n    }\n\n    function resizeAndUpdate() {\n      function updateModel() {\n        $timeout(function () {\n          update(keep ? prevValidFiles.concat(valids) : valids,\n            keep ? prevInvalidFiles.concat(invalids) : invalids,\n            files, dupFiles, isSingleModel);\n        }, options && options.debounce ? options.debounce.change || options.debounce : 0);\n      }\n\n      var resizingFiles = validateAfterResize ? allNewFiles : valids;\n      resizeFile(resizingFiles, attr, scope, ngModel).then(function () {\n        if (validateAfterResize) {\n          upload.validate(allNewFiles, keep ? prevValidFiles.length : 0, ngModel, attr, scope)\n            .then(function (validationResult) {\n              valids = validationResult.validFiles;\n              invalids = validationResult.invalidFiles;\n              updateModel();\n            });\n        } else {\n          updateModel();\n        }\n      }, function () {\n        for (var i = 0; i < resizingFiles.length; i++) {\n          var f = resizingFiles[i];\n          if (f.$error === 'resize') {\n            var index = valids.indexOf(f);\n            if (index > -1) {\n              valids.splice(index, 1);\n              invalids.push(f);\n            }\n            updateModel();\n          }\n        }\n      });\n    }\n\n    prevValidFiles = attr.$$ngfPrevValidFiles || [];\n    prevInvalidFiles = attr.$$ngfPrevInvalidFiles || [];\n    if (ngModel && ngModel.$modelValue) {\n      prevValidFiles = toArray(ngModel.$modelValue);\n    }\n\n    var keep = upload.attrGetter('ngfKeep', attr, scope);\n    allNewFiles = (files || []).slice(0);\n    if (keep === 'distinct' || upload.attrGetter('ngfKeepDistinct', attr, scope) === true) {\n      removeDuplicates(attr, scope);\n    }\n\n    var isSingleModel = !keep && !upload.attrGetter('ngfMultiple', attr, scope) && !upload.attrGetter('multiple', attr);\n\n    if (keep && !allNewFiles.length) return;\n\n    upload.attrGetter('ngfBeforeModelChange', attr, scope, {\n      $files: files,\n      $file: files && files.length ? files[0] : null,\n      $newFiles: allNewFiles,\n      $duplicateFiles: dupFiles,\n      $event: evt\n    });\n\n    var validateAfterResize = upload.attrGetter('ngfValidateAfterResize', attr, scope);\n\n    var options = upload.attrGetter('ngfModelOptions', attr, scope);\n    upload.validate(allNewFiles, keep ? prevValidFiles.length : 0, ngModel, attr, scope)\n      .then(function (validationResult) {\n      if (noDelay) {\n        update(allNewFiles, [], files, dupFiles, isSingleModel);\n      } else {\n        if ((!options || !options.allowInvalid) && !validateAfterResize) {\n          valids = validationResult.validFiles;\n          invalids = validationResult.invalidFiles;\n        } else {\n          valids = allNewFiles;\n        }\n        if (upload.attrGetter('ngfFixOrientation', attr, scope) && upload.isExifSupported()) {\n          applyExifRotations(valids, attr, scope).then(function () {\n            resizeAndUpdate();\n          });\n        } else {\n          resizeAndUpdate();\n        }\n      }\n    });\n  };\n\n  return upload;\n}]);\n\nngFileUpload.directive('ngfSelect', ['$parse', '$timeout', '$compile', 'Upload', function ($parse, $timeout, $compile, Upload) {\n  var generatedElems = [];\n\n  function isDelayedClickSupported(ua) {\n    // fix for android native browser < 4.4 and safari windows\n    var m = ua.match(/Android[^\\d]*(\\d+)\\.(\\d+)/);\n    if (m && m.length > 2) {\n      var v = Upload.defaults.androidFixMinorVersion || 4;\n      return parseInt(m[1]) < 4 || (parseInt(m[1]) === v && parseInt(m[2]) < v);\n    }\n\n    // safari on windows\n    return ua.indexOf('Chrome') === -1 && /.*Windows.*Safari.*/.test(ua);\n  }\n\n  function linkFileSelect(scope, elem, attr, ngModel, $parse, $timeout, $compile, upload) {\n    /** @namespace attr.ngfSelect */\n    /** @namespace attr.ngfChange */\n    /** @namespace attr.ngModel */\n    /** @namespace attr.ngfModelOptions */\n    /** @namespace attr.ngfMultiple */\n    /** @namespace attr.ngfCapture */\n    /** @namespace attr.ngfValidate */\n    /** @namespace attr.ngfKeep */\n    var attrGetter = function (name, scope) {\n      return upload.attrGetter(name, attr, scope);\n    };\n\n    function isInputTypeFile() {\n      return elem[0].tagName.toLowerCase() === 'input' && attr.type && attr.type.toLowerCase() === 'file';\n    }\n\n    function fileChangeAttr() {\n      return attrGetter('ngfChange') || attrGetter('ngfSelect');\n    }\n\n    function changeFn(evt) {\n      if (upload.shouldUpdateOn('change', attr, scope)) {\n        var fileList = evt.__files_ || (evt.target && evt.target.files), files = [];\n        /* Handle duplicate call in  IE11 */\n        if (!fileList) return;\n        for (var i = 0; i < fileList.length; i++) {\n          files.push(fileList[i]);\n        }\n        upload.updateModel(ngModel, attr, scope, fileChangeAttr(),\n          files.length ? files : null, evt);\n      }\n    }\n\n    upload.registerModelChangeValidator(ngModel, attr, scope);\n\n    var unwatches = [];\n    if (attrGetter('ngfMultiple')) {\n      unwatches.push(scope.$watch(attrGetter('ngfMultiple'), function () {\n        fileElem.attr('multiple', attrGetter('ngfMultiple', scope));\n      }));\n    }\n    if (attrGetter('ngfCapture')) {\n      unwatches.push(scope.$watch(attrGetter('ngfCapture'), function () {\n        fileElem.attr('capture', attrGetter('ngfCapture', scope));\n      }));\n    }\n    if (attrGetter('ngfAccept')) {\n      unwatches.push(scope.$watch(attrGetter('ngfAccept'), function () {\n        fileElem.attr('accept', attrGetter('ngfAccept', scope));\n      }));\n    }\n    unwatches.push(attr.$observe('accept', function () {\n      fileElem.attr('accept', attrGetter('accept'));\n    }));\n    function bindAttrToFileInput(fileElem, label) {\n      function updateId(val) {\n        fileElem.attr('id', 'ngf-' + val);\n        label.attr('id', 'ngf-label-' + val);\n      }\n\n      for (var i = 0; i < elem[0].attributes.length; i++) {\n        var attribute = elem[0].attributes[i];\n        if (attribute.name !== 'type' && attribute.name !== 'class' && attribute.name !== 'style') {\n          if (attribute.name === 'id') {\n            updateId(attribute.value);\n            unwatches.push(attr.$observe('id', updateId));\n          } else {\n            fileElem.attr(attribute.name, (!attribute.value && (attribute.name === 'required' ||\n            attribute.name === 'multiple')) ? attribute.name : attribute.value);\n          }\n        }\n      }\n    }\n\n    function createFileInput() {\n      if (isInputTypeFile()) {\n        return elem;\n      }\n\n      var fileElem = angular.element('<input type=\"file\">');\n\n      var label = angular.element('<label>upload</label>');\n      label.css('visibility', 'hidden').css('position', 'absolute').css('overflow', 'hidden')\n        .css('width', '0px').css('height', '0px').css('border', 'none')\n        .css('margin', '0px').css('padding', '0px').attr('tabindex', '-1');\n      bindAttrToFileInput(fileElem, label);\n\n      generatedElems.push({el: elem, ref: label});\n\n      document.body.appendChild(label.append(fileElem)[0]);\n\n      return fileElem;\n    }\n\n    function clickHandler(evt) {\n      if (elem.attr('disabled')) return false;\n      if (attrGetter('ngfSelectDisabled', scope)) return;\n\n      var r = detectSwipe(evt);\n      // prevent the click if it is a swipe\n      if (r != null) return r;\n\n      resetModel(evt);\n\n      // fix for md when the element is removed from the DOM and added back #460\n      try {\n        if (!isInputTypeFile() && !document.body.contains(fileElem[0])) {\n          generatedElems.push({el: elem, ref: fileElem.parent()});\n          document.body.appendChild(fileElem.parent()[0]);\n          fileElem.bind('change', changeFn);\n        }\n      } catch (e) {/*ignore*/\n      }\n\n      if (isDelayedClickSupported(navigator.userAgent)) {\n        setTimeout(function () {\n          fileElem[0].click();\n        }, 0);\n      } else {\n        fileElem[0].click();\n      }\n\n      return false;\n    }\n\n\n    var initialTouchStartY = 0;\n    var initialTouchStartX = 0;\n\n    function detectSwipe(evt) {\n      var touches = evt.changedTouches || (evt.originalEvent && evt.originalEvent.changedTouches);\n      if (touches) {\n        if (evt.type === 'touchstart') {\n          initialTouchStartX = touches[0].clientX;\n          initialTouchStartY = touches[0].clientY;\n          return true; // don't block event default\n        } else {\n          // prevent scroll from triggering event\n          if (evt.type === 'touchend') {\n            var currentX = touches[0].clientX;\n            var currentY = touches[0].clientY;\n            if ((Math.abs(currentX - initialTouchStartX) > 20) ||\n              (Math.abs(currentY - initialTouchStartY) > 20)) {\n              evt.stopPropagation();\n              evt.preventDefault();\n              return false;\n            }\n          }\n          return true;\n        }\n      }\n    }\n\n    var fileElem = elem;\n\n    function resetModel(evt) {\n      if (upload.shouldUpdateOn('click', attr, scope) && fileElem.val()) {\n        fileElem.val(null);\n        upload.updateModel(ngModel, attr, scope, fileChangeAttr(), null, evt, true);\n      }\n    }\n\n    if (!isInputTypeFile()) {\n      fileElem = createFileInput();\n    }\n    fileElem.bind('change', changeFn);\n\n    if (!isInputTypeFile()) {\n      elem.bind('click touchstart touchend', clickHandler);\n    } else {\n      elem.bind('click', resetModel);\n    }\n\n    function ie10SameFileSelectFix(evt) {\n      if (fileElem && !fileElem.attr('__ngf_ie10_Fix_')) {\n        if (!fileElem[0].parentNode) {\n          fileElem = null;\n          return;\n        }\n        evt.preventDefault();\n        evt.stopPropagation();\n        fileElem.unbind('click');\n        var clone = fileElem.clone();\n        fileElem.replaceWith(clone);\n        fileElem = clone;\n        fileElem.attr('__ngf_ie10_Fix_', 'true');\n        fileElem.bind('change', changeFn);\n        fileElem.bind('click', ie10SameFileSelectFix);\n        fileElem[0].click();\n        return false;\n      } else {\n        fileElem.removeAttr('__ngf_ie10_Fix_');\n      }\n    }\n\n    if (navigator.appVersion.indexOf('MSIE 10') !== -1) {\n      fileElem.bind('click', ie10SameFileSelectFix);\n    }\n\n    if (ngModel) ngModel.$formatters.push(function (val) {\n      if (val == null || val.length === 0) {\n        if (fileElem.val()) {\n          fileElem.val(null);\n        }\n      }\n      return val;\n    });\n\n    scope.$on('$destroy', function () {\n      if (!isInputTypeFile()) fileElem.parent().remove();\n      angular.forEach(unwatches, function (unwatch) {\n        unwatch();\n      });\n    });\n\n    $timeout(function () {\n      for (var i = 0; i < generatedElems.length; i++) {\n        var g = generatedElems[i];\n        if (!document.body.contains(g.el[0])) {\n          generatedElems.splice(i, 1);\n          g.ref.remove();\n        }\n      }\n    });\n\n    if (window.FileAPI && window.FileAPI.ngfFixIE) {\n      window.FileAPI.ngfFixIE(elem, fileElem, changeFn);\n    }\n  }\n\n  return {\n    restrict: 'AEC',\n    require: '?ngModel',\n    link: function (scope, elem, attr, ngModel) {\n      linkFileSelect(scope, elem, attr, ngModel, $parse, $timeout, $compile, Upload);\n    }\n  };\n}]);\n\n(function () {\n\n  ngFileUpload.service('UploadDataUrl', ['UploadBase', '$timeout', '$q', function (UploadBase, $timeout, $q) {\n    var upload = UploadBase;\n    upload.base64DataUrl = function (file) {\n      if (angular.isArray(file)) {\n        var d = $q.defer(), count = 0;\n        angular.forEach(file, function (f) {\n          upload.dataUrl(f, true)['finally'](function () {\n            count++;\n            if (count === file.length) {\n              var urls = [];\n              angular.forEach(file, function (ff) {\n                urls.push(ff.$ngfDataUrl);\n              });\n              d.resolve(urls, file);\n            }\n          });\n        });\n        return d.promise;\n      } else {\n        return upload.dataUrl(file, true);\n      }\n    };\n    upload.dataUrl = function (file, disallowObjectUrl) {\n      if (!file) return upload.emptyPromise(file, file);\n      if ((disallowObjectUrl && file.$ngfDataUrl != null) || (!disallowObjectUrl && file.$ngfBlobUrl != null)) {\n        return upload.emptyPromise(disallowObjectUrl ? file.$ngfDataUrl : file.$ngfBlobUrl, file);\n      }\n      var p = disallowObjectUrl ? file.$$ngfDataUrlPromise : file.$$ngfBlobUrlPromise;\n      if (p) return p;\n\n      var deferred = $q.defer();\n      $timeout(function () {\n        if (window.FileReader && file &&\n          (!window.FileAPI || navigator.userAgent.indexOf('MSIE 8') === -1 || file.size < 20000) &&\n          (!window.FileAPI || navigator.userAgent.indexOf('MSIE 9') === -1 || file.size < 4000000)) {\n          //prefer URL.createObjectURL for handling refrences to files of all sizes\n          //since it doesn´t build a large string in memory\n          var URL = window.URL || window.webkitURL;\n          if (URL && URL.createObjectURL && !disallowObjectUrl) {\n            var url;\n            try {\n              url = URL.createObjectURL(file);\n            } catch (e) {\n              $timeout(function () {\n                file.$ngfBlobUrl = '';\n                deferred.reject();\n              });\n              return;\n            }\n            $timeout(function () {\n              file.$ngfBlobUrl = url;\n              if (url) {\n                deferred.resolve(url, file);\n                upload.blobUrls = upload.blobUrls || [];\n                upload.blobUrlsTotalSize = upload.blobUrlsTotalSize || 0;\n                upload.blobUrls.push({url: url, size: file.size});\n                upload.blobUrlsTotalSize += file.size || 0;\n                var maxMemory = upload.defaults.blobUrlsMaxMemory || 268435456;\n                var maxLength = upload.defaults.blobUrlsMaxQueueSize || 200;\n                while ((upload.blobUrlsTotalSize > maxMemory || upload.blobUrls.length > maxLength) && upload.blobUrls.length > 1) {\n                  var obj = upload.blobUrls.splice(0, 1)[0];\n                  URL.revokeObjectURL(obj.url);\n                  upload.blobUrlsTotalSize -= obj.size;\n                }\n              }\n            });\n          } else {\n            var fileReader = new FileReader();\n            fileReader.onload = function (e) {\n              $timeout(function () {\n                file.$ngfDataUrl = e.target.result;\n                deferred.resolve(e.target.result, file);\n                $timeout(function () {\n                  delete file.$ngfDataUrl;\n                }, 1000);\n              });\n            };\n            fileReader.onerror = function () {\n              $timeout(function () {\n                file.$ngfDataUrl = '';\n                deferred.reject();\n              });\n            };\n            fileReader.readAsDataURL(file);\n          }\n        } else {\n          $timeout(function () {\n            file[disallowObjectUrl ? '$ngfDataUrl' : '$ngfBlobUrl'] = '';\n            deferred.reject();\n          });\n        }\n      });\n\n      if (disallowObjectUrl) {\n        p = file.$$ngfDataUrlPromise = deferred.promise.catch(angular.noop);\n      } else {\n        p = file.$$ngfBlobUrlPromise = deferred.promise.catch(angular.noop);\n      }\n      p['finally'](function () {\n        delete file[disallowObjectUrl ? '$$ngfDataUrlPromise' : '$$ngfBlobUrlPromise'];\n      });\n      return p;\n    };\n    return upload;\n  }]);\n\n  function getTagType(el) {\n    if (el.tagName.toLowerCase() === 'img') return 'image';\n    if (el.tagName.toLowerCase() === 'audio') return 'audio';\n    if (el.tagName.toLowerCase() === 'video') return 'video';\n    return /./;\n  }\n\n  function linkFileDirective(Upload, $timeout, scope, elem, attr, directiveName, resizeParams, isBackground) {\n    function constructDataUrl(file) {\n      var disallowObjectUrl = Upload.attrGetter('ngfNoObjectUrl', attr, scope);\n      Upload.dataUrl(file, disallowObjectUrl)['finally'](function () {\n        $timeout(function () {\n          var src = (disallowObjectUrl ? file.$ngfDataUrl : file.$ngfBlobUrl) || file.$ngfDataUrl;\n          if (isBackground) {\n            elem.css('background-image', 'url(\\'' + (src || '') + '\\')');\n          } else {\n            elem.attr('src', src);\n          }\n          if (src) {\n            elem.removeClass('ng-hide');\n          } else {\n            elem.addClass('ng-hide');\n          }\n        });\n      });\n    }\n\n    $timeout(function () {\n      var unwatch = scope.$watch(attr[directiveName], function (file) {\n        var size = resizeParams;\n        if (directiveName === 'ngfThumbnail') {\n          if (!size) {\n            size = {\n              width: elem[0].naturalWidth || elem[0].clientWidth,\n              height: elem[0].naturalHeight || elem[0].clientHeight\n            };\n          }\n          if (size.width === 0 && window.getComputedStyle) {\n            var style = getComputedStyle(elem[0]);\n            if (style.width && style.width.indexOf('px') > -1 && style.height && style.height.indexOf('px') > -1) {\n              size = {\n                width: parseInt(style.width.slice(0, -2)),\n                height: parseInt(style.height.slice(0, -2))\n              };\n            }\n          }\n        }\n\n        if (angular.isString(file)) {\n          elem.removeClass('ng-hide');\n          if (isBackground) {\n            return elem.css('background-image', 'url(\\'' + file + '\\')');\n          } else {\n            return elem.attr('src', file);\n          }\n        }\n        if (file && file.type && file.type.search(getTagType(elem[0])) === 0 &&\n          (!isBackground || file.type.indexOf('image') === 0)) {\n          if (size && Upload.isResizeSupported()) {\n            size.resizeIf = function (width, height) {\n              return Upload.attrGetter('ngfResizeIf', attr, scope,\n                {$width: width, $height: height, $file: file});\n            };\n            Upload.resize(file, size).then(\n              function (f) {\n                constructDataUrl(f);\n              }, function (e) {\n                throw e;\n              }\n            );\n          } else {\n            constructDataUrl(file);\n          }\n        } else {\n          elem.addClass('ng-hide');\n        }\n      });\n\n      scope.$on('$destroy', function () {\n        unwatch();\n      });\n    });\n  }\n\n\n  /** @namespace attr.ngfSrc */\n  /** @namespace attr.ngfNoObjectUrl */\n  ngFileUpload.directive('ngfSrc', ['Upload', '$timeout', function (Upload, $timeout) {\n    return {\n      restrict: 'AE',\n      link: function (scope, elem, attr) {\n        linkFileDirective(Upload, $timeout, scope, elem, attr, 'ngfSrc',\n          Upload.attrGetter('ngfResize', attr, scope), false);\n      }\n    };\n  }]);\n\n  /** @namespace attr.ngfBackground */\n  /** @namespace attr.ngfNoObjectUrl */\n  ngFileUpload.directive('ngfBackground', ['Upload', '$timeout', function (Upload, $timeout) {\n    return {\n      restrict: 'AE',\n      link: function (scope, elem, attr) {\n        linkFileDirective(Upload, $timeout, scope, elem, attr, 'ngfBackground',\n          Upload.attrGetter('ngfResize', attr, scope), true);\n      }\n    };\n  }]);\n\n  /** @namespace attr.ngfThumbnail */\n  /** @namespace attr.ngfAsBackground */\n  /** @namespace attr.ngfSize */\n  /** @namespace attr.ngfNoObjectUrl */\n  ngFileUpload.directive('ngfThumbnail', ['Upload', '$timeout', function (Upload, $timeout) {\n    return {\n      restrict: 'AE',\n      link: function (scope, elem, attr) {\n        var size = Upload.attrGetter('ngfSize', attr, scope);\n        linkFileDirective(Upload, $timeout, scope, elem, attr, 'ngfThumbnail', size,\n          Upload.attrGetter('ngfAsBackground', attr, scope));\n      }\n    };\n  }]);\n\n  ngFileUpload.config(['$compileProvider', function ($compileProvider) {\n    if ($compileProvider.imgSrcSanitizationWhitelist) $compileProvider.imgSrcSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/);\n    if ($compileProvider.aHrefSanitizationWhitelist) $compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/);\n  }]);\n\n  ngFileUpload.filter('ngfDataUrl', ['UploadDataUrl', '$sce', function (UploadDataUrl, $sce) {\n    return function (file, disallowObjectUrl, trustedUrl) {\n      if (angular.isString(file)) {\n        return $sce.trustAsResourceUrl(file);\n      }\n      var src = file && ((disallowObjectUrl ? file.$ngfDataUrl : file.$ngfBlobUrl) || file.$ngfDataUrl);\n      if (file && !src) {\n        if (!file.$ngfDataUrlFilterInProgress && angular.isObject(file)) {\n          file.$ngfDataUrlFilterInProgress = true;\n          UploadDataUrl.dataUrl(file, disallowObjectUrl);\n        }\n        return '';\n      }\n      if (file) delete file.$ngfDataUrlFilterInProgress;\n      return (file && src ? (trustedUrl ? $sce.trustAsResourceUrl(src) : src) : file) || '';\n    };\n  }]);\n\n})();\n\nvar fileType = require('file-type');\n\nngFileUpload.service('UploadValidate', ['UploadDataUrl', '$q', '$timeout', function (UploadDataUrl, $q, $timeout) {\n  var upload = UploadDataUrl;\n\n  function globStringToRegex(str) {\n    var regexp = '', excludes = [];\n    if (str.length > 2 && str[0] === '/' && str[str.length - 1] === '/') {\n      regexp = str.substring(1, str.length - 1);\n    } else {\n      var split = str.split(',');\n      if (split.length > 1) {\n        for (var i = 0; i < split.length; i++) {\n          var r = globStringToRegex(split[i]);\n          if (r.regexp) {\n            regexp += '(' + r.regexp + ')';\n            if (i < split.length - 1) {\n              regexp += '|';\n            }\n          } else {\n            excludes = excludes.concat(r.excludes);\n          }\n        }\n      } else {\n        if (str.indexOf('!') === 0) {\n          excludes.push('^((?!' + globStringToRegex(str.substring(1)).regexp + ').)*$');\n        } else {\n          if (str.indexOf('.') === 0) {\n            str = '*' + str;\n          }\n          regexp = '^' + str.replace(new RegExp('[.\\\\\\\\+*?\\\\[\\\\^\\\\]$(){}=!<>|:\\\\-]', 'g'), '\\\\$&') + '$';\n          regexp = regexp.replace(/\\\\\\*/g, '.*').replace(/\\\\\\?/g, '.');\n        }\n      }\n    }\n    return {regexp: regexp, excludes: excludes};\n  }\n\n  upload.validatePattern = function (file, val) {\n    if (!val) {\n      return true;\n    }\n    var pattern = globStringToRegex(val), valid = true;\n    if (pattern.regexp && pattern.regexp.length) {\n      var regexp = new RegExp(pattern.regexp, 'i');\n      valid = (file.type != null && regexp.test(file.type)) ||\n        (file.name != null && regexp.test(file.name));\n    }\n    var len = pattern.excludes.length;\n    while (len--) {\n      var exclude = new RegExp(pattern.excludes[len], 'i');\n      valid = valid && (file.type == null || exclude.test(file.type)) &&\n        (file.name == null || exclude.test(file.name));\n    }\n    return valid;\n  };\n\n  upload.ratioToFloat = function (val) {\n    var r = val.toString(), xIndex = r.search(/[x:]/i);\n    if (xIndex > -1) {\n      r = parseFloat(r.substring(0, xIndex)) / parseFloat(r.substring(xIndex + 1));\n    } else {\n      r = parseFloat(r);\n    }\n    return r;\n  };\n\n  upload.registerModelChangeValidator = function (ngModel, attr, scope) {\n    if (ngModel) {\n      ngModel.$formatters.push(function (files) {\n        if (ngModel.$dirty) {\n          var filesArray = files;\n          if (files && !angular.isArray(files)) {\n            filesArray = [files];\n          }\n          upload.validate(filesArray, 0, ngModel, attr, scope).then(function () {\n            upload.applyModelValidation(ngModel, filesArray);\n          });\n        }\n        return files;\n      });\n    }\n  };\n\n  function markModelAsDirty(ngModel, files) {\n    if (files != null && !ngModel.$dirty) {\n      if (ngModel.$setDirty) {\n        ngModel.$setDirty();\n      } else {\n        ngModel.$dirty = true;\n      }\n    }\n  }\n\n  upload.applyModelValidation = function (ngModel, files) {\n    markModelAsDirty(ngModel, files);\n    angular.forEach(ngModel.$ngfValidations, function (validation) {\n      ngModel.$setValidity(validation.name, validation.valid);\n    });\n  };\n\n  upload.getValidationAttr = function (attr, scope, name, validationName, file) {\n    var dName = 'ngf' + name[0].toUpperCase() + name.substr(1);\n    var val = upload.attrGetter(dName, attr, scope, {$file: file});\n    if (val == null) {\n      val = upload.attrGetter('ngfValidate', attr, scope, {$file: file});\n      if (val) {\n        var split = (validationName || name).split('.');\n        val = val[split[0]];\n        if (split.length > 1) {\n          val = val && val[split[1]];\n        }\n      }\n    }\n    return val;\n  };\n\n  // Reference:\n  // https://github.com/sindresorhus/file-type\n  function _validateFileType(acceptPattern, file) {\n    if (!acceptPattern) {\n      return true;\n    }\n\n    var d = $q.defer();\n    var filereader = new FileReader();\n\n    filereader.onloadend = function(evt) {\n      if (evt.target.readyState === FileReader.DONE) {\n        var type = fileType(new Uint8Array(evt.target.result));\n\n        var fakeFile = {\n          name: file.name,\n          type: type.mime,\n        };\n\n        var isValid = upload.validatePattern(fakeFile, acceptPattern);\n        d.resolve(isValid);\n      }\n    }\n    var blob = file.slice(0, fileType.minimumBytes);\n    filereader.readAsArrayBuffer(blob);\n\n    return d.promise;\n  }\n\n  upload.validate = function (files, prevLength, ngModel, attr, scope) {\n    ngModel = ngModel || {};\n    ngModel.$ngfValidations = ngModel.$ngfValidations || [];\n\n    angular.forEach(ngModel.$ngfValidations, function (v) {\n      v.valid = true;\n    });\n\n    var attrGetter = function (name, params) {\n      return upload.attrGetter(name, attr, scope, params);\n    };\n\n    var ignoredErrors = (upload.attrGetter('ngfIgnoreInvalid', attr, scope) || '').split(' ');\n    var runAllValidation = upload.attrGetter('ngfRunAllValidations', attr, scope);\n\n    if (files == null || files.length === 0) {\n      return upload.emptyPromise({'validFiles': files, 'invalidFiles': []});\n    }\n\n    files = files.length === undefined ? [files] : files.slice(0);\n    var invalidFiles = [];\n\n    function validateSync(name, validationName, fn) {\n      if (files) {\n        var i = files.length, valid = null;\n        while (i--) {\n          var file = files[i];\n          if (file) {\n            var val = upload.getValidationAttr(attr, scope, name, validationName, file);\n            if (val != null) {\n              if (!fn(file, val, i)) {\n                if (ignoredErrors.indexOf(name) === -1) {\n                  file.$error = name;\n                  (file.$errorMessages = (file.$errorMessages || {}))[name] = true;\n                  file.$errorParam = val;\n                  if (invalidFiles.indexOf(file) === -1) {\n                    invalidFiles.push(file);\n                  }\n                  if (!runAllValidation) {\n                    files.splice(i, 1);\n                  }\n                  valid = false;\n                } else {\n                  files.splice(i, 1);\n                }\n              }\n            }\n          }\n        }\n        if (valid !== null) {\n          ngModel.$ngfValidations.push({name: name, valid: valid});\n        }\n      }\n    }\n\n    validateSync('pattern', null, upload.validatePattern);\n    validateSync('minSize', 'size.min', function (file, val) {\n      return file.size + 0.1 >= upload.translateScalars(val);\n    });\n    validateSync('maxSize', 'size.max', function (file, val) {\n      return file.size - 0.1 <= upload.translateScalars(val);\n    });\n    var totalSize = 0;\n    validateSync('maxTotalSize', null, function (file, val) {\n      totalSize += file.size;\n      if (totalSize > upload.translateScalars(val)) {\n        files.splice(0, files.length);\n        return false;\n      }\n      return true;\n    });\n\n    validateSync('validateFn', null, function (file, r) {\n      return r === true || r === null || r === '';\n    });\n\n    if (!files.length) {\n      return upload.emptyPromise({'validFiles': [], 'invalidFiles': invalidFiles});\n    }\n\n    function validateAsync(name, validationName, type, asyncFn, fn) {\n      function resolveResult(defer, file, val) {\n        function resolveInternal(fn) {\n          if (fn()) {\n            if (ignoredErrors.indexOf(name) === -1) {\n              file.$error = name;\n              (file.$errorMessages = (file.$errorMessages || {}))[name] = true;\n              file.$errorParam = val;\n              if (invalidFiles.indexOf(file) === -1) {\n                invalidFiles.push(file);\n              }\n              if (!runAllValidation) {\n                var i = files.indexOf(file);\n                if (i > -1) files.splice(i, 1);\n              }\n              defer.resolve(false);\n            } else {\n              var j = files.indexOf(file);\n              if (j > -1) files.splice(j, 1);\n              defer.resolve(true);\n            }\n          } else {\n            defer.resolve(true);\n          }\n        }\n\n        if (val != null) {\n          asyncFn(file, val).then(function (d) {\n            resolveInternal(function () {\n              return !fn(d, val);\n            });\n          }, function () {\n            resolveInternal(function () {\n              return attrGetter('ngfValidateForce', {$file: file});\n            });\n          });\n        } else {\n          defer.resolve(true);\n        }\n      }\n\n      var promises = [upload.emptyPromise(true)];\n      if (files) {\n        files = files.length === undefined ? [files] : files;\n        angular.forEach(files, function (file) {\n          var defer = $q.defer();\n          promises.push(defer.promise);\n          if (type && (file.type == null || file.type.search(type) !== 0)) {\n            defer.resolve(true);\n            return;\n          }\n          if (name === 'dimensions' && upload.attrGetter('ngfDimensions', attr) != null) {\n            upload.imageDimensions(file).then(function (d) {\n              resolveResult(defer, file,\n                attrGetter('ngfDimensions', {$file: file, $width: d.width, $height: d.height}));\n            }, function () {\n              defer.resolve(false);\n            });\n          } else if (name === 'duration' && upload.attrGetter('ngfDuration', attr) != null) {\n            upload.mediaDuration(file).then(function (d) {\n              resolveResult(defer, file,\n                attrGetter('ngfDuration', {$file: file, $duration: d}));\n            }, function () {\n              defer.resolve(false);\n            });\n          } else {\n            resolveResult(defer, file,\n              upload.getValidationAttr(attr, scope, name, validationName, file));\n          }\n        });\n      }\n      var deffer = $q.defer();\n      $q.all(promises).then(function (values) {\n        var isValid = true;\n        for (var i = 0; i < values.length; i++) {\n          if (!values[i]) {\n            isValid = false;\n            break;\n          }\n        }\n        ngModel.$ngfValidations.push({name: name, valid: isValid});\n        deffer.resolve(isValid);\n      });\n      return deffer.promise;\n    }\n\n    var deffer = $q.defer();\n    var promises = [];\n\n    if (files) {\n      var ftAcceptPattern = attr.accept || null;\n      var fti = files.length;\n\n      while (fti--) {\n        var ftFile = files[fti];\n        promises.push(function() {\n          var d = $q.defer();\n\n          _validateFileType(ftAcceptPattern, ftFile).then(function(isValidFileType) {\n            if (!isValidFileType) {\n              invalidFiles.push(ftFile);\n              files.splice(fti, 1);\n              ngModel.$ngfValidations.push({name: name, valid: false});\n\n              d.reject('Invalid file type');\n              return;\n            }\n\n            d.resolve(isValidFileType);\n          });\n\n          return d.promise;\n        }());\n      }\n    }\n\n    promises.push(validateAsync('maxHeight', 'height.max', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.height <= val;\n      }));\n    promises.push(validateAsync('minHeight', 'height.min', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.height >= val;\n      }));\n    promises.push(validateAsync('maxWidth', 'width.max', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.width <= val;\n      }));\n    promises.push(validateAsync('minWidth', 'width.min', /image/,\n      this.imageDimensions, function (d, val) {\n        return d.width >= val;\n      }));\n    promises.push(validateAsync('dimensions', null, /image/,\n      function (file, val) {\n        return upload.emptyPromise(val);\n      }, function (r) {\n        return r;\n      }));\n    promises.push(validateAsync('ratio', null, /image/,\n      this.imageDimensions, function (d, val) {\n        var split = val.toString().split(','), valid = false;\n        for (var i = 0; i < split.length; i++) {\n          if (Math.abs((d.width / d.height) - upload.ratioToFloat(split[i])) < 0.01) {\n            valid = true;\n          }\n        }\n        return valid;\n      }));\n    promises.push(validateAsync('maxRatio', 'ratio.max', /image/,\n      this.imageDimensions, function (d, val) {\n        return (d.width / d.height) - upload.ratioToFloat(val) < 0.0001;\n      }));\n    promises.push(validateAsync('minRatio', 'ratio.min', /image/,\n      this.imageDimensions, function (d, val) {\n        return (d.width / d.height) - upload.ratioToFloat(val) > -0.0001;\n      }));\n    promises.push(validateAsync('maxDuration', 'duration.max', /audio|video/,\n      this.mediaDuration, function (d, val) {\n        return d <= upload.translateScalars(val);\n      }));\n    promises.push(validateAsync('minDuration', 'duration.min', /audio|video/,\n      this.mediaDuration, function (d, val) {\n        return d >= upload.translateScalars(val);\n      }));\n    promises.push(validateAsync('duration', null, /audio|video/,\n      function (file, val) {\n        return upload.emptyPromise(val);\n      }, function (r) {\n        return r;\n      }));\n\n    promises.push(validateAsync('validateAsyncFn', null, null,\n      function (file, val) {\n        return val;\n      }, function (r) {\n        return r === true || r === null || r === '';\n      }));\n\n    $q.all(promises).then(function () {\n\n      if (runAllValidation) {\n        for (var i = 0; i < files.length; i++) {\n          var file = files[i];\n          if (file.$error) {\n            files.splice(i--, 1);\n          }\n        }\n      }\n\n      runAllValidation = false;\n      validateSync('maxFiles', null, function (file, val, i) {\n        return prevLength + i < val;\n      });\n\n      deffer.resolve({'validFiles': files, 'invalidFiles': invalidFiles});\n    });\n    return deffer.promise;\n  };\n\n  upload.imageDimensions = function (file) {\n    if (file.$ngfWidth && file.$ngfHeight) {\n      var d = $q.defer();\n      $timeout(function () {\n        d.resolve({width: file.$ngfWidth, height: file.$ngfHeight});\n      });\n      return d.promise;\n    }\n    if (file.$ngfDimensionPromise) return file.$ngfDimensionPromise;\n\n    var deferred = $q.defer();\n    $timeout(function () {\n      if (file.type.indexOf('image') !== 0) {\n        deferred.reject('not image');\n        return;\n      }\n      upload.dataUrl(file).then(function (dataUrl) {\n        var img = angular.element('<img>').attr('src', dataUrl)\n          .css('visibility', 'hidden').css('position', 'fixed')\n          .css('max-width', 'none !important').css('max-height', 'none !important');\n\n        function success() {\n          var width = img[0].naturalWidth || img[0].clientWidth;\n          var height = img[0].naturalHeight || img[0].clientHeight;\n          img.remove();\n          file.$ngfWidth = width;\n          file.$ngfHeight = height;\n          deferred.resolve({width: width, height: height});\n        }\n\n        function error() {\n          img.remove();\n          deferred.reject('load error');\n        }\n\n        img.on('load', success);\n        img.on('error', error);\n\n        var secondsCounter = 0;\n        function checkLoadErrorInCaseOfNoCallback() {\n          $timeout(function () {\n            if (img[0].parentNode) {\n              if (img[0].clientWidth) {\n                success();\n              } else if (secondsCounter++ > 10) {\n                error();\n              } else {\n                checkLoadErrorInCaseOfNoCallback();\n              }\n            }\n          }, 1000);\n        }\n\n        checkLoadErrorInCaseOfNoCallback();\n\n        angular.element(document.getElementsByTagName('body')[0]).append(img);\n      }, function () {\n        deferred.reject('load error');\n      });\n    });\n\n    file.$ngfDimensionPromise = deferred.promise;\n    file.$ngfDimensionPromise['finally'](function () {\n      delete file.$ngfDimensionPromise;\n    });\n    return file.$ngfDimensionPromise;\n  };\n\n  upload.mediaDuration = function (file) {\n    if (file.$ngfDuration) {\n      var d = $q.defer();\n      $timeout(function () {\n        d.resolve(file.$ngfDuration);\n      });\n      return d.promise;\n    }\n    if (file.$ngfDurationPromise) return file.$ngfDurationPromise;\n\n    var deferred = $q.defer();\n    $timeout(function () {\n      if (file.type.indexOf('audio') !== 0 && file.type.indexOf('video') !== 0) {\n        deferred.reject('not media');\n        return;\n      }\n      upload.dataUrl(file).then(function (dataUrl) {\n        var el = angular.element(file.type.indexOf('audio') === 0 ? '<audio>' : '<video>')\n          .attr('src', dataUrl).css('visibility', 'none').css('position', 'fixed');\n\n        function success() {\n          var duration = el[0].duration;\n          file.$ngfDuration = duration;\n          el.remove();\n          deferred.resolve(duration);\n        }\n\n        function error() {\n          el.remove();\n          deferred.reject('load error');\n        }\n\n        el.on('loadedmetadata', success);\n        el.on('error', error);\n\n        var count = 0;\n        function checkLoadError() {\n          count++;\n          $timeout(function () {\n            if (el[0].parentNode) {\n              if (el[0].duration) {\n                success();\n              } else if (count++ > 10) {\n                error();\n              } else {\n                checkLoadError();\n              }\n            }\n          }, 1000);\n        }\n\n        checkLoadError();\n\n        angular.element(document.body).append(el);\n      }, function () {\n        deferred.reject('load error');\n      });\n    });\n\n    file.$ngfDurationPromise = deferred.promise;\n    file.$ngfDurationPromise['finally'](function () {\n      delete file.$ngfDurationPromise;\n    });\n    return file.$ngfDurationPromise;\n  };\n  return upload;\n}\n]);\n\nngFileUpload.service('UploadResize', ['UploadValidate', '$q', function (UploadValidate, $q) {\n  var upload = UploadValidate;\n\n  /**\n   * Conserve aspect ratio of the original region. Useful when shrinking/enlarging\n   * images to fit into a certain area.\n   * Source:  http://stackoverflow.com/a/14731922\n   *\n   * @param {Number} srcWidth Source area width\n   * @param {Number} srcHeight Source area height\n   * @param {Number} maxWidth Nestable area maximum available width\n   * @param {Number} maxHeight Nestable area maximum available height\n   * @return {Object} { width, height }\n   */\n  var calculateAspectRatioFit = function (srcWidth, srcHeight, maxWidth, maxHeight, centerCrop) {\n    var ratio = centerCrop ? Math.max(maxWidth / srcWidth, maxHeight / srcHeight) :\n      Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n    return {\n      width: srcWidth * ratio, height: srcHeight * ratio,\n      marginX: srcWidth * ratio - maxWidth, marginY: srcHeight * ratio - maxHeight\n    };\n  };\n\n  // Extracted from https://github.com/romelgomez/angular-firebase-image-upload/blob/master/app/scripts/fileUpload.js#L89\n  var resize = function (imagen, width, height, quality, type, ratio, centerCrop, resizeIf) {\n    var deferred = $q.defer();\n    var canvasElement = document.createElement('canvas');\n    var imageElement = document.createElement('img');\n    imageElement.setAttribute('style', 'visibility:hidden;position:fixed;z-index:-100000');\n    document.body.appendChild(imageElement);\n\n    imageElement.onload = function () {\n      var imgWidth = imageElement.width, imgHeight = imageElement.height;\n      imageElement.parentNode.removeChild(imageElement);\n      if (resizeIf != null && resizeIf(imgWidth, imgHeight) === false) {\n        deferred.reject('resizeIf');\n        return;\n      }\n      try {\n        if (ratio) {\n          var ratioFloat = upload.ratioToFloat(ratio);\n          var imgRatio = imgWidth / imgHeight;\n          if (imgRatio < ratioFloat) {\n            width = imgWidth;\n            height = width / ratioFloat;\n          } else {\n            height = imgHeight;\n            width = height * ratioFloat;\n          }\n        }\n        if (!width) {\n          width = imgWidth;\n        }\n        if (!height) {\n          height = imgHeight;\n        }\n        var dimensions = calculateAspectRatioFit(imgWidth, imgHeight, width, height, centerCrop);\n        canvasElement.width = Math.min(dimensions.width, width);\n        canvasElement.height = Math.min(dimensions.height, height);\n        var context = canvasElement.getContext('2d');\n        context.drawImage(imageElement,\n          Math.min(0, -dimensions.marginX / 2), Math.min(0, -dimensions.marginY / 2),\n          dimensions.width, dimensions.height);\n        deferred.resolve(canvasElement.toDataURL(type || 'image/WebP', quality || 0.934));\n      } catch (e) {\n        deferred.reject(e);\n      }\n    };\n    imageElement.onerror = function () {\n      imageElement.parentNode.removeChild(imageElement);\n      deferred.reject();\n    };\n    imageElement.src = imagen;\n    return deferred.promise;\n  };\n\n  upload.dataUrltoBlob = function (dataurl, name, origSize) {\n    var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n      bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n    while (n--) {\n      u8arr[n] = bstr.charCodeAt(n);\n    }\n    var blob = new window.Blob([u8arr], {type: mime});\n    blob.name = name;\n    blob.$ngfOrigSize = origSize;\n    return blob;\n  };\n\n  upload.isResizeSupported = function () {\n    var elem = document.createElement('canvas');\n    return window.atob && elem.getContext && elem.getContext('2d') && window.Blob;\n  };\n\n  if (upload.isResizeSupported()) {\n    // add name getter to the blob constructor prototype\n    Object.defineProperty(window.Blob.prototype, 'name', {\n      get: function () {\n        return this.$ngfName;\n      },\n      set: function (v) {\n        this.$ngfName = v;\n      },\n      configurable: true\n    });\n  }\n\n  upload.resize = function (file, options) {\n    if (file.type.indexOf('image') !== 0) return upload.emptyPromise(file);\n\n    var deferred = $q.defer();\n    upload.dataUrl(file, true).then(function (url) {\n      resize(url, options.width, options.height, options.quality, options.type || file.type,\n        options.ratio, options.centerCrop, options.resizeIf)\n        .then(function (dataUrl) {\n          if (file.type === 'image/jpeg' && options.restoreExif !== false) {\n            try {\n              dataUrl = upload.restoreExif(url, dataUrl);\n            } catch (e) {\n              setTimeout(function () {throw e;}, 1);\n            }\n          }\n          try {\n            var blob = upload.dataUrltoBlob(dataUrl, file.name, file.size);\n            deferred.resolve(blob);\n          } catch (e) {\n            deferred.reject(e);\n          }\n        }, function (r) {\n          if (r === 'resizeIf') {\n            deferred.resolve(file);\n          }\n          deferred.reject(r);\n        });\n    }, function (e) {\n      deferred.reject(e);\n    });\n    return deferred.promise;\n  };\n\n  return upload;\n}]);\n\n(function () {\n  ngFileUpload.directive('ngfDrop', ['$parse', '$timeout', '$window', 'Upload', '$http', '$q',\n    function ($parse, $timeout, $window, Upload, $http, $q) {\n      return {\n        restrict: 'AEC',\n        require: '?ngModel',\n        link: function (scope, elem, attr, ngModel) {\n          linkDrop(scope, elem, attr, ngModel, $parse, $timeout, $window, Upload, $http, $q);\n        }\n      };\n    }]);\n\n  ngFileUpload.directive('ngfNoFileDrop', function () {\n    return function (scope, elem) {\n      if (dropAvailable()) elem.css('display', 'none');\n    };\n  });\n\n  ngFileUpload.directive('ngfDropAvailable', ['$parse', '$timeout', 'Upload', function ($parse, $timeout, Upload) {\n    return function (scope, elem, attr) {\n      if (dropAvailable()) {\n        var model = $parse(Upload.attrGetter('ngfDropAvailable', attr));\n        $timeout(function () {\n          model(scope);\n          if (model.assign) {\n            model.assign(scope, true);\n          }\n        });\n      }\n    };\n  }]);\n\n  function linkDrop(scope, elem, attr, ngModel, $parse, $timeout, $window, upload, $http, $q) {\n    var available = dropAvailable();\n\n    var attrGetter = function (name, scope, params) {\n      return upload.attrGetter(name, attr, scope, params);\n    };\n\n    if (attrGetter('dropAvailable')) {\n      $timeout(function () {\n        if (scope[attrGetter('dropAvailable')]) {\n          scope[attrGetter('dropAvailable')].value = available;\n        } else {\n          scope[attrGetter('dropAvailable')] = available;\n        }\n      });\n    }\n    if (!available) {\n      if (attrGetter('ngfHideOnDropNotAvailable', scope) === true) {\n        elem.css('display', 'none');\n      }\n      return;\n    }\n\n    function isDisabled() {\n      return elem.attr('disabled') || attrGetter('ngfDropDisabled', scope);\n    }\n\n    if (attrGetter('ngfSelect') == null) {\n      upload.registerModelChangeValidator(ngModel, attr, scope);\n    }\n\n    var leaveTimeout = null;\n    var stopPropagation = $parse(attrGetter('ngfStopPropagation'));\n    var dragOverDelay = 1;\n    var actualDragOverClass;\n\n    elem[0].addEventListener('dragover', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n      // handling dragover events from the Chrome download bar\n      if (navigator.userAgent.indexOf('Chrome') > -1) {\n        var b = evt.dataTransfer.effectAllowed;\n        evt.dataTransfer.dropEffect = ('move' === b || 'linkMove' === b) ? 'move' : 'copy';\n      }\n      $timeout.cancel(leaveTimeout);\n      if (!actualDragOverClass) {\n        actualDragOverClass = 'C';\n        calculateDragOverClass(scope, attr, evt, function (clazz) {\n          actualDragOverClass = clazz;\n          elem.addClass(actualDragOverClass);\n          attrGetter('ngfDrag', scope, {$isDragging: true, $class: actualDragOverClass, $event: evt});\n        });\n      }\n    }, false);\n    elem[0].addEventListener('dragenter', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n    }, false);\n    elem[0].addEventListener('dragleave', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n      leaveTimeout = $timeout(function () {\n        if (actualDragOverClass) elem.removeClass(actualDragOverClass);\n        actualDragOverClass = null;\n        attrGetter('ngfDrag', scope, {$isDragging: false, $event: evt});\n      }, dragOverDelay || 100);\n    }, false);\n    elem[0].addEventListener('drop', function (evt) {\n      if (isDisabled() || !upload.shouldUpdateOn('drop', attr, scope)) return;\n      evt.preventDefault();\n      if (stopPropagation(scope)) evt.stopPropagation();\n      if (actualDragOverClass) elem.removeClass(actualDragOverClass);\n      actualDragOverClass = null;\n      extractFilesAndUpdateModel(evt.dataTransfer, evt, 'dropUrl');\n    }, false);\n    elem[0].addEventListener('paste', function (evt) {\n      if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1 &&\n        attrGetter('ngfEnableFirefoxPaste', scope)) {\n        evt.preventDefault();\n      }\n      if (isDisabled() || !upload.shouldUpdateOn('paste', attr, scope)) return;\n      extractFilesAndUpdateModel(evt.clipboardData || evt.originalEvent.clipboardData, evt, 'pasteUrl');\n    }, false);\n\n    if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1 &&\n      attrGetter('ngfEnableFirefoxPaste', scope)) {\n      elem.attr('contenteditable', true);\n      elem.on('keypress', function (e) {\n        if (!e.metaKey && !e.ctrlKey) {\n          e.preventDefault();\n        }\n      });\n    }\n\n    function extractFilesAndUpdateModel(source, evt, updateOnType) {\n      if (!source) return;\n      // html needs to be calculated on the same process otherwise the data will be wiped\n      // after promise resolve or setTimeout.\n      var html;\n      try {\n        html = source && source.getData && source.getData('text/html');\n      } catch (e) {/* Fix IE11 that throw error calling getData */\n      }\n      extractFiles(source.items, source.files, attrGetter('ngfAllowDir', scope) !== false,\n        attrGetter('multiple') || attrGetter('ngfMultiple', scope)).then(function (files) {\n        if (files.length) {\n          updateModel(files, evt);\n        } else {\n          extractFilesFromHtml(updateOnType, html).then(function (files) {\n            updateModel(files, evt);\n          });\n        }\n      });\n    }\n\n    function updateModel(files, evt) {\n      upload.updateModel(ngModel, attr, scope, attrGetter('ngfChange') || attrGetter('ngfDrop'), files, evt);\n    }\n\n    function extractFilesFromHtml(updateOn, html) {\n      if (!upload.shouldUpdateOn(updateOn, attr, scope) || typeof html !== 'string') return upload.rejectPromise([]);\n      var urls = [];\n      html.replace(/<(img src|img [^>]* src) *=\\\"([^\\\"]*)\\\"/gi, function (m, n, src) {\n        urls.push(src);\n      });\n      var promises = [], files = [];\n      if (urls.length) {\n        angular.forEach(urls, function (url) {\n          promises.push(upload.urlToBlob(url).then(function (blob) {\n            files.push(blob);\n          }));\n        });\n        var defer = $q.defer();\n        $q.all(promises).then(function () {\n          defer.resolve(files);\n        }, function (e) {\n          defer.reject(e);\n        });\n        return defer.promise;\n      }\n      return upload.emptyPromise();\n    }\n\n    function calculateDragOverClass(scope, attr, evt, callback) {\n      var obj = attrGetter('ngfDragOverClass', scope, {$event: evt}), dClass = 'dragover';\n      if (angular.isString(obj)) {\n        dClass = obj;\n      } else if (obj) {\n        if (obj.delay) dragOverDelay = obj.delay;\n        if (obj.accept || obj.reject) {\n          var items = evt.dataTransfer.items;\n          if (items == null || !items.length) {\n            dClass = obj.accept;\n          } else {\n            var pattern = obj.pattern || attrGetter('ngfPattern', scope, {$event: evt});\n            var len = items.length;\n            while (len--) {\n              if (!upload.validatePattern(items[len], pattern)) {\n                dClass = obj.reject;\n                break;\n              } else {\n                dClass = obj.accept;\n              }\n            }\n          }\n        }\n      }\n      callback(dClass);\n    }\n\n    function extractFiles(items, fileList, allowDir, multiple) {\n      var maxFiles = upload.getValidationAttr(attr, scope, 'maxFiles');\n      if (maxFiles == null) {\n        maxFiles = Number.MAX_VALUE;\n      }\n      var maxTotalSize = upload.getValidationAttr(attr, scope, 'maxTotalSize');\n      if (maxTotalSize == null) {\n        maxTotalSize = Number.MAX_VALUE;\n      }\n      var includeDir = attrGetter('ngfIncludeDir', scope);\n      var files = [], totalSize = 0;\n\n      function traverseFileTree(entry, path) {\n        var defer = $q.defer();\n        if (entry != null) {\n          if (entry.isDirectory) {\n            var promises = [upload.emptyPromise()];\n            if (includeDir) {\n              var file = {type: 'directory'};\n              file.name = file.path = (path || '') + entry.name;\n              files.push(file);\n            }\n            var dirReader = entry.createReader();\n            var entries = [];\n            var readEntries = function () {\n              dirReader.readEntries(function (results) {\n                try {\n                  if (!results.length) {\n                    angular.forEach(entries.slice(0), function (e) {\n                      if (files.length <= maxFiles && totalSize <= maxTotalSize) {\n                        promises.push(traverseFileTree(e, (path ? path : '') + entry.name + '/'));\n                      }\n                    });\n                    $q.all(promises).then(function () {\n                      defer.resolve();\n                    }, function (e) {\n                      defer.reject(e);\n                    });\n                  } else {\n                    entries = entries.concat(Array.prototype.slice.call(results || [], 0));\n                    readEntries();\n                  }\n                } catch (e) {\n                  defer.reject(e);\n                }\n              }, function (e) {\n                defer.reject(e);\n              });\n            };\n            readEntries();\n          } else {\n            entry.file(function (file) {\n              try {\n                file.path = (path ? path : '') + file.name;\n                if (includeDir) {\n                  file = upload.rename(file, file.path);\n                }\n                files.push(file);\n                totalSize += file.size;\n                defer.resolve();\n              } catch (e) {\n                defer.reject(e);\n              }\n            }, function (e) {\n              defer.reject(e);\n            });\n          }\n        }\n        return defer.promise;\n      }\n\n      var promises = [upload.emptyPromise()];\n\n      if (items && items.length > 0 && $window.location.protocol !== 'file:') {\n        for (var i = 0; i < items.length; i++) {\n          if (items[i].webkitGetAsEntry && items[i].webkitGetAsEntry() && items[i].webkitGetAsEntry().isDirectory) {\n            var entry = items[i].webkitGetAsEntry();\n            if (entry.isDirectory && !allowDir) {\n              continue;\n            }\n            if (entry != null) {\n              promises.push(traverseFileTree(entry));\n            }\n          } else {\n            var f = items[i].getAsFile();\n            if (f != null) {\n              files.push(f);\n              totalSize += f.size;\n            }\n          }\n          if (files.length > maxFiles || totalSize > maxTotalSize ||\n            (!multiple && files.length > 0)) break;\n        }\n      } else {\n        if (fileList != null) {\n          for (var j = 0; j < fileList.length; j++) {\n            var file = fileList.item(j);\n            if (file.type || file.size > 0) {\n              files.push(file);\n              totalSize += file.size;\n            }\n            if (files.length > maxFiles || totalSize > maxTotalSize ||\n              (!multiple && files.length > 0)) break;\n          }\n        }\n      }\n\n      var defer = $q.defer();\n      $q.all(promises).then(function () {\n        if (!multiple && !includeDir && files.length) {\n          var i = 0;\n          while (files[i] && files[i].type === 'directory') i++;\n          defer.resolve([files[i]]);\n        } else {\n          defer.resolve(files);\n        }\n      }, function (e) {\n        defer.reject(e);\n      });\n\n      return defer.promise;\n    }\n  }\n\n  function dropAvailable() {\n    var div = document.createElement('div');\n    return ('draggable' in div) && ('ondrop' in div) && !/Edge\\/12./i.test(navigator.userAgent);\n  }\n\n})();\n\n// customized version of https://github.com/exif-js/exif-js\nngFileUpload.service('UploadExif', ['UploadResize', '$q', function (UploadResize, $q) {\n  var upload = UploadResize;\n\n  upload.isExifSupported = function () {\n    return window.FileReader && new FileReader().readAsArrayBuffer && upload.isResizeSupported();\n  };\n\n  function applyTransform(ctx, orientation, width, height) {\n    switch (orientation) {\n      case 2:\n        return ctx.transform(-1, 0, 0, 1, width, 0);\n      case 3:\n        return ctx.transform(-1, 0, 0, -1, width, height);\n      case 4:\n        return ctx.transform(1, 0, 0, -1, 0, height);\n      case 5:\n        return ctx.transform(0, 1, 1, 0, 0, 0);\n      case 6:\n        return ctx.transform(0, 1, -1, 0, height, 0);\n      case 7:\n        return ctx.transform(0, -1, -1, 0, height, width);\n      case 8:\n        return ctx.transform(0, -1, 1, 0, 0, width);\n    }\n  }\n\n  upload.readOrientation = function (file) {\n    var defer = $q.defer();\n    var reader = new FileReader();\n    var slicedFile = file.slice ? file.slice(0, 64 * 1024) : file;\n    reader.readAsArrayBuffer(slicedFile);\n    reader.onerror = function (e) {\n      return defer.reject(e);\n    };\n    reader.onload = function (e) {\n      var result = {orientation: 1};\n      var view = new DataView(this.result);\n      if (view.getUint16(0, false) !== 0xFFD8) return defer.resolve(result);\n\n      var length = view.byteLength,\n        offset = 2;\n      while (offset < length) {\n        var marker = view.getUint16(offset, false);\n        offset += 2;\n        if (marker === 0xFFE1) {\n          if (view.getUint32(offset += 2, false) !== 0x45786966) return defer.resolve(result);\n\n          var little = view.getUint16(offset += 6, false) === 0x4949;\n          offset += view.getUint32(offset + 4, little);\n          var tags = view.getUint16(offset, little);\n          offset += 2;\n          for (var i = 0; i < tags; i++)\n            if (view.getUint16(offset + (i * 12), little) === 0x0112) {\n              var orientation = view.getUint16(offset + (i * 12) + 8, little);\n              if (orientation >= 2 && orientation <= 8) {\n                view.setUint16(offset + (i * 12) + 8, 1, little);\n                result.fixedArrayBuffer = e.target.result;\n              }\n              result.orientation = orientation;\n              return defer.resolve(result);\n            }\n        } else if ((marker & 0xFF00) !== 0xFF00) break;\n        else offset += view.getUint16(offset, false);\n      }\n      return defer.resolve(result);\n    };\n    return defer.promise;\n  };\n\n  function arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  }\n\n  upload.applyExifRotation = function (file) {\n    if (file.type.indexOf('image/jpeg') !== 0) {\n      return upload.emptyPromise(file);\n    }\n\n    var deferred = $q.defer();\n    upload.readOrientation(file).then(function (result) {\n      if (result.orientation < 2 || result.orientation > 8) {\n        return deferred.resolve(file);\n      }\n      upload.dataUrl(file, true).then(function (url) {\n        var canvas = document.createElement('canvas');\n        var img = document.createElement('img');\n\n        img.onload = function () {\n          try {\n            canvas.width = result.orientation > 4 ? img.height : img.width;\n            canvas.height = result.orientation > 4 ? img.width : img.height;\n            var ctx = canvas.getContext('2d');\n            applyTransform(ctx, result.orientation, img.width, img.height);\n            ctx.drawImage(img, 0, 0);\n            var dataUrl = canvas.toDataURL(file.type || 'image/WebP', 0.934);\n            dataUrl = upload.restoreExif(arrayBufferToBase64(result.fixedArrayBuffer), dataUrl);\n            var blob = upload.dataUrltoBlob(dataUrl, file.name);\n            deferred.resolve(blob);\n          } catch (e) {\n            return deferred.reject(e);\n          }\n        };\n        img.onerror = function () {\n          deferred.reject();\n        };\n        img.src = url;\n      }, function (e) {\n        deferred.reject(e);\n      });\n    }, function (e) {\n      deferred.reject(e);\n    });\n    return deferred.promise;\n  };\n\n  upload.restoreExif = function (orig, resized) {\n    var ExifRestorer = {};\n\n    ExifRestorer.KEY_STR = 'ABCDEFGHIJKLMNOP' +\n      'QRSTUVWXYZabcdef' +\n      'ghijklmnopqrstuv' +\n      'wxyz0123456789+/' +\n      '=';\n\n    ExifRestorer.encode64 = function (input) {\n      var output = '',\n        chr1, chr2, chr3 = '',\n        enc1, enc2, enc3, enc4 = '',\n        i = 0;\n\n      do {\n        chr1 = input[i++];\n        chr2 = input[i++];\n        chr3 = input[i++];\n\n        enc1 = chr1 >> 2;\n        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n        enc4 = chr3 & 63;\n\n        if (isNaN(chr2)) {\n          enc3 = enc4 = 64;\n        } else if (isNaN(chr3)) {\n          enc4 = 64;\n        }\n\n        output = output +\n          this.KEY_STR.charAt(enc1) +\n          this.KEY_STR.charAt(enc2) +\n          this.KEY_STR.charAt(enc3) +\n          this.KEY_STR.charAt(enc4);\n        chr1 = chr2 = chr3 = '';\n        enc1 = enc2 = enc3 = enc4 = '';\n      } while (i < input.length);\n\n      return output;\n    };\n\n    ExifRestorer.restore = function (origFileBase64, resizedFileBase64) {\n      if (origFileBase64.match('data:image/jpeg;base64,')) {\n        origFileBase64 = origFileBase64.replace('data:image/jpeg;base64,', '');\n      }\n\n      var rawImage = this.decode64(origFileBase64);\n      var segments = this.slice2Segments(rawImage);\n\n      var image = this.exifManipulation(resizedFileBase64, segments);\n\n      return 'data:image/jpeg;base64,' + this.encode64(image);\n    };\n\n\n    ExifRestorer.exifManipulation = function (resizedFileBase64, segments) {\n      var exifArray = this.getExifArray(segments),\n        newImageArray = this.insertExif(resizedFileBase64, exifArray);\n      return new Uint8Array(newImageArray);\n    };\n\n\n    ExifRestorer.getExifArray = function (segments) {\n      var seg;\n      for (var x = 0; x < segments.length; x++) {\n        seg = segments[x];\n        if (seg[0] === 255 & seg[1] === 225) //(ff e1)\n        {\n          return seg;\n        }\n      }\n      return [];\n    };\n\n\n    ExifRestorer.insertExif = function (resizedFileBase64, exifArray) {\n      var imageData = resizedFileBase64.replace('data:image/jpeg;base64,', ''),\n        buf = this.decode64(imageData),\n        separatePoint = buf.indexOf(255, 3),\n        mae = buf.slice(0, separatePoint),\n        ato = buf.slice(separatePoint),\n        array = mae;\n\n      array = array.concat(exifArray);\n      array = array.concat(ato);\n      return array;\n    };\n\n\n    ExifRestorer.slice2Segments = function (rawImageArray) {\n      var head = 0,\n        segments = [];\n\n      while (1) {\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 218) {\n          break;\n        }\n        if (rawImageArray[head] === 255 & rawImageArray[head + 1] === 216) {\n          head += 2;\n        }\n        else {\n          var length = rawImageArray[head + 2] * 256 + rawImageArray[head + 3],\n            endPoint = head + length + 2,\n            seg = rawImageArray.slice(head, endPoint);\n          segments.push(seg);\n          head = endPoint;\n        }\n        if (head > rawImageArray.length) {\n          break;\n        }\n      }\n\n      return segments;\n    };\n\n\n    ExifRestorer.decode64 = function (input) {\n      var chr1, chr2, chr3 = '',\n        enc1, enc2, enc3, enc4 = '',\n        i = 0,\n        buf = [];\n\n      // remove all characters that are not A-Z, a-z, 0-9, +, /, or =\n      var base64test = /[^A-Za-z0-9\\+\\/\\=]/g;\n      if (base64test.exec(input)) {\n        console.log('There were invalid base64 characters in the input text.\\n' +\n          'Valid base64 characters are A-Z, a-z, 0-9, ' + ', ' / ',and \"=\"\\n' +\n          'Expect errors in decoding.');\n      }\n      input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n      do {\n        enc1 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc2 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc3 = this.KEY_STR.indexOf(input.charAt(i++));\n        enc4 = this.KEY_STR.indexOf(input.charAt(i++));\n\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n\n        buf.push(chr1);\n\n        if (enc3 !== 64) {\n          buf.push(chr2);\n        }\n        if (enc4 !== 64) {\n          buf.push(chr3);\n        }\n\n        chr1 = chr2 = chr3 = '';\n        enc1 = enc2 = enc3 = enc4 = '';\n\n      } while (i < input.length);\n\n      return buf;\n    };\n\n    return ExifRestorer.restore(orig, resized);  //<= EXIF\n  };\n\n  return upload;\n}]);\n\n"]}